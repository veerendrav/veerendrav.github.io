function refreshDisplay(){var e=new Date;$("#currtime").text("Current time (Local): "+e);for(var n=0;n<deadlines_conferences.length;n++)refreshDeadline(n,deadlines_conferences[n],e,"conference",!1);for(n=0;n<deadlines_conferences_approx.length;n++)refreshDeadline(n,deadlines_conferences_approx[n],e,"conference",!0);for(n=0;n<deadlines_journals.length;n++)refreshDeadline(n,deadlines_journals[n],e,"journal",!1);for(n=0;n<deadlines_journals_approx.length;n++)refreshDeadline(n,deadlines_journals_approx[n],e,"journal",!0)}function refreshDeadline(e,n,a,i,d){var r,o="",c="";d&&(c="based on previous year!",o="_approx"),o="_"+i+o,n.rolling?(r="Rolling",m=new Date(0)):(m=new Date(n.deadline.getTime()-a.getTime()),r=timeLeftDescription(m));var l="";"ranking"in n&&n.ranking&&(l='<span class="ranking-badge '+("rank-"+n.ranking.toLowerCase().replace(/\*/g,"star").replace(/\s+/g,"-"))+'">'+n.ranking+"</span> ");var s,t,f,p,u,v,_,k=n.venue;"location"in n&&(k=k+"  ("+n.location+")"),"link"in n&&(k='<span class="vld" id="link'+o+e+'">'+k+"</span>"),s="venue_long"in n?'<div class="ad">'+n.venue_long+"</div>":"",t="area"in n?'<div class="ad">'+n.area+"</div>":"",f="conference_dates"in n?new Date(n.conference_dates.start).toDateString().slice(0,-5)+" to "+new Date(n.conference_dates.end).toDateString():"Not known",p="abstract_deadline"in n?'<div class="td"> Abstracts: '+convertAoeToLocal(n.abstract_deadline).toString()+"</div>":"",u="format"in n?'<div class="cd"> Format: '+n.format+"</div>":"",v="camera_ready"in n?'<div class="td"> Camera Ready: '+new Date(n.camera_ready).toDateString()+"</div>":"",_="notification"in n?'<div class="td"> Notification: '+new Date(n.notification).toDateString()+"</div>":"";var g=n.rolling?'<div class="td"> Submission: Rolling (Open Year-Round)</div>':'<div class="td"> Deadline: '+n.deadline.toString()+"</div>",h=n.rolling?"":'<div class="cd"> Conference Dates: '+f+"</div>";$("#deadline"+o+e).html('<div class="tld">'+r+'</div><div class="vd">'+l+k+"</div>"+s+t+p+g+_+v+h+u+'<div class="wd">'+c+'</div><div class="hd" id="hide'+o+e+'">hide</div>');var b,x="#deadline"+o+e;$("#hide"+o+e).click((b=x,function(){return $(b).hide(),!1}));var D="#link"+o+e;if($(D).click(function(e){return function(){return window.open(e),!1}}(n.link)),-1!==backi){k=(n="conference"===backtype?backapprox?deadlines_conferences_approx[backi]:deadlines_conferences[backi]:backapprox?deadlines_journals_approx[backi]:deadlines_journals[backi]).venue;"link"in n&&(k='<span class="vld" id="link'+o+e+'">'+k+"</span>");var m=new Date(n.deadline.getTime()-a.getTime());$("#backfacetext").html(k+"</br>"+timeLeftDescription(m));D="#link"+o+e;$(D).click(function(e){return function(){return window.open(e),!1}}(n.link))}}var datasource="/assets/json/deadlines.json",backi=-1,backtype="",backapprox=!1,timeLeftDescription=function(e){var n=e.getTime();n<0&&(n=0);var a=n/1e3,i=Math.floor(a)%60,d=a/60,r=Math.floor(d)%60,o=d/60,c=Math.floor(o)%24,l=o/24;return Math.floor(l)+" days, "+(c<10?"0":"")+c+"h "+(r<10?"0":"")+r+"m "+(i<10?"0":"")+i+"s"},convertAoeToLocal=function(e){var n=new Date(e),a=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds()));return a.setUTCHours(a.getUTCHours()+12),a},deadlines_conferences=new Array,deadlines_conferences_approx=new Array,deadlines_journals=new Array,deadlines_journals_approx=new Array;$.ajaxSetup({async:!1}),$.getJSON(datasource,function(e){var n=new Date;for(var a in e){var i="journal"===e[a].type;if(!i||e[a].deadline){if(e[a].deadline){for(d=convertAoeToLocal(e[a].deadline);d<n;)d.setFullYear(d.getFullYear()+1),e[a].approx=1;e[a].deadline=d;var r=e[a].approx;i&&r?deadlines_journals_approx.push(e[a]):i&&!r?deadlines_journals.push(e[a]):!i&&r?deadlines_conferences_approx.push(e[a]):deadlines_conferences.push(e[a])}}else e[a].deadline=new Date("2030/12/31"),e[a].rolling=!0,deadlines_journals.push(e[a])}deadlines_conferences.sort(function(e,n){return e.deadline.getTime()-n.deadline.getTime()}),deadlines_conferences_approx.sort(function(e,n){return e.deadline.getTime()-n.deadline.getTime()}),deadlines_journals.sort(function(e,n){return e.deadline.getTime()-n.deadline.getTime()}),deadlines_journals_approx.sort(function(e,n){return e.deadline.getTime()-n.deadline.getTime()})}),$(document).ready(function(){$("<h2 class='section-header'>Conferences</h2>").appendTo("div#deadlinesdiv");for(var e=0;e<deadlines_conferences.length;e++){deadlines_conferences[e];$("<div class='dd' id='deadline_conference"+e+"'></div>").appendTo("div#deadlinesdiv");var n="#deadline_conference"+e;$(n).hide(),$(n).fadeIn(200*(e+1),function(){}),$(n).click(function(e,n,a){return function(){backi=e,backtype=n,backapprox=a,$("#backface").fadeIn("slow")}}(e,"conference",!1))}for(e=0;e<deadlines_conferences_approx.length;e++){deadlines_conferences_approx[e];$("<div class='dd' id='deadline_conference_approx"+e+"'></div>").appendTo("div#deadlinesdiv");n="#deadline_conference_approx"+e;$(n).hide(),$(n).fadeIn(200*(e+1),function(){}),$(n).click(function(e,n,a){return function(){backi=e,backtype=n,backapprox=a,$("#backface").fadeIn("slow")}}(e,"conference",!0))}$("<h2 class='section-header'>Journals</h2>").appendTo("div#deadlinesdiv");for(e=0;e<deadlines_journals.length;e++){deadlines_journals[e];$("<div class='dd' id='deadline_journal"+e+"'></div>").appendTo("div#deadlinesdiv");n="#deadline_journal"+e;$(n).hide(),$(n).fadeIn(200*(e+1),function(){}),$(n).click(function(e,n,a){return function(){backi=e,backtype=n,backapprox=a,$("#backface").fadeIn("slow")}}(e,"journal",!1))}for(e=0;e<deadlines_journals_approx.length;e++){deadlines_journals_approx[e];$("<div class='dd' id='deadline_journal_approx"+e+"'></div>").appendTo("div#deadlinesdiv");n="#deadline_journal_approx"+e;$(n).hide(),$(n).fadeIn(200*(e+1),function(){}),$(n).click(function(e,n,a){return function(){backi=e,backtype=n,backapprox=a,$("#backface").fadeIn("slow")}}(e,"journal",!0))}setInterval(function(){refreshDisplay()},1e3),$("#backface").click(function(){backi=-1,$("#backface").fadeOut("slow")}),$("#makeown").click(function(){backi=-1,$("#instrown").fadeToggle()}),refreshDisplay()});